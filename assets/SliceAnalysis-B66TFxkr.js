import{R as f,n as t,p as r,u as p,bM as x,eR as L,i7 as b,mv as m,eS as w,a2 as S,q as v}from"./index-Dg_V7Ho7.js";import{c as g}from"./Analysis-CR20eJWV.js";import{c as E}from"./SlicePlane-BE5dAVyZ.js";let a=class extends f{constructor(e){super(e),this.layerId=""}static fromLayer(e){return new this({layerId:e.type==="building-component"?e.layer.id:e.id,sublayerId:e.type==="building-component"?e.id:void 0})}};t([r({type:String,json:{write:{isRequired:!0}}})],a.prototype,"layerId",void 0),t([r({type:Number,json:{write:!0}})],a.prototype,"sublayerId",void 0),a=t([p("esri.analysis.support.SliceAnalysisExcludedLayer")],a);let s=class extends g{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new x}set excludedLayers(e){this._set("excludedLayers",L(e,this._get("excludedLayers")))}writeExcludedLayers(e,n,d,o){e.length!==0&&(n[d]=e.toArray().map(u=>a.fromLayer(u).toJSON(o)))}readExcludedLayers(e,n,d){const o=d?.initiator;o&&d?.hooks?.onAfterLoad(async()=>{for(const u of e){const{layerId:c,sublayerId:y}=a.fromJSON(u,d),i=o.allLayers.find(({id:l})=>l===c);if(i)if(y!=null&&"allSublayers"in i){await i.load();const l=i.allSublayers.find(({id:h})=>h===y);l&&"type"in l&&l.type==="building-component"&&this.excludedLayers.add(l)}else this.excludedLayers.add(i)}})}get valid(){return this.shape?.position!=null}equals(e){return this===e||super.equals(e)&&b(this.shape,e.shape)&&this.tiltEnabled===e.tiltEnabled&&m(this.excludedLayers.toArray(),e.excludedLayers.toArray())&&this.excludeGroundSurface===e.excludeGroundSurface}clear(){this.shape=null}};t([r({type:["slice"],json:{read:!1,write:{isRequired:!0}}})],s.prototype,"type",void 0),t([r({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],s.prototype,"tiltEnabled",void 0),t([r({types:{key:"type",base:null,typeMap:{plane:E},defaultKeyValue:"plane"},json:{write:{isRequired:!0}}})],s.prototype,"shape",void 0),t([r({cast:w,clonable:e=>e.slice(),json:{type:[a],write:!0}})],s.prototype,"excludedLayers",null),t([S("excludedLayers")],s.prototype,"writeExcludedLayers",null),t([v("excludedLayers")],s.prototype,"readExcludedLayers",null),t([r({type:Boolean,nonNullable:!0,json:{write:!0}})],s.prototype,"excludeGroundSurface",void 0),t([r({readOnly:!0})],s.prototype,"valid",null),s=t([p("esri.analysis.SliceAnalysis")],s);const A=s;export{A as default};
